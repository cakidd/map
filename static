<!DOCTYPE html>
<html>
<head>
    <title>Community Resources Map</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://js.arcgis.com/4.28/esri/themes/light/main.css">
    <script src="https://js.arcgis.com/4.28/"></script>
    <style>
        #mapContainer {
            position: relative;
            height: 600px;
        }
        #overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255,255,255,0.9);
            cursor: pointer;
            z-index: 100;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: Arial;
            text-align: center;
            padding: 20px;
        }
        #overlay h2 {
            color: #1a5f3e;
            font-size: 1.5rem;
        }
    </style>
</head>
<body>
    <div id="mapContainer">
        <div id="overlay">
            <div>
                <h2>Community Resources Map</h2>
                <p>Tap anywhere to interact</p>
            </div>
        </div>
        <div id="viewDiv"></div>
    </div>

    <script>
        require(["esri/WebMap", "esri/views/MapView"], (WebMap, MapView) => {
            const webmap = new WebMap({
                portalItem: { id: "8e06c22f77184bdaa46b3c422180a2c6" }
            });

            const view = new MapView({
                container: "viewDiv",
                map: webmap,
                padding: { top: 50 },
                ui: { components: [] } // Remove all UI controls
            });

            // Disable interactions initially
            view.popup.autoOpenEnabled = false;
            view.on("click", (e) => e.stopPropagation());
            view.on("double-click", (e) => e.stopPropagation());
            view.on("drag", (e) => e.stopPropagation());

            // Click overlay to enable interaction
            document.getElementById("overlay").addEventListener("click", () => {
                document.getElementById("overlay").style.display = "none";
                view.ui.add("zoom"); // Restore zoom controls
                view.popup.autoOpenEnabled = true;
                
                // Re-enable map interactions
                view.on("click", (e) => e.stopPropagation());
                view.on("double-click", (e) => e.stopPropagation());
                view.on("drag", (e) => e.stopPropagation());
            });
        });
    </script>
</body>
</html>
